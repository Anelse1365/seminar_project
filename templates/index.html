<!DOCTYPE html>
<html>
<head>
    <title>Flask-WTF Example</title>
    <style>
        input[type="text"] {
            width: 80%;
            padding: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>Welcome to my website</h1>
    <form method="POST" action="{{ url_for('index') }}">
        {{ form.hidden_tag() }}
        <div>
            {{ form.quiz.label }}<br>            
            {{ form.quiz(size=50) }}
        </div>
        <div>
            {{ form.answer.label }}<br> 
            {{ form.answer(size=50) }}
        </div><br> 
        {{ form.submit }}
    </form>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const inputField = document.querySelector('input[name="quiz"]');

            inputField.addEventListener('input', () => {
                const value = inputField.value;
                const openTagPattern = /<(\w+)>/g;
                let match;

                while ((match = openTagPattern.exec(value)) !== null) {
                    const tag = match[1];
                    const openTag = `<${tag}>`;
                    const closeTag = `</${tag}>`;
                    const openTagIndex = match.index;
                    const afterOpenTagIndex = openTagIndex + openTag.length;

                    if (!value.includes(closeTag, afterOpenTagIndex)) {
                        inputField.value = value.substring(0, afterOpenTagIndex) + closeTag + value.substring(afterOpenTagIndex);
                        inputField.setSelectionRange(afterOpenTagIndex, afterOpenTagIndex);
                    }
                }
            });
        });
    </script>
</body>
</html>
